# 多线程

## 什么是多线程？

### **线程**

**一、定义**

线程是进程中的一个实体，是被系统独立调度和分派的基本单位。一个进程可以包含多个线程，这些线程共享进程的资源，如内存空间、文件描述符等。

**二、组成部分**

1. 线程标识符：用于唯一标识一个线程。
2. 一组寄存器：包括程序计数器、栈指针等，用于保存线程的执行状态。
3. 栈：用于存储线程的局部变量和调用栈。
4. 调度优先级：决定线程在竞争处理器资源时的优先级。

**三、主要特征**

1. 轻型实体：线程的创建、切换和销毁所需的系统开销比进程小得多。
2. 独立调度：线程可以独立地被操作系统调度执行。
3. 共享进程资源：多个线程可以共享所属进程的资源，提高了资源的利用率和系统的并发性。
4. 并发性高：在多处理器系统中，多个线程可以同时在不同的处理器上执行，提高了系统的性能。

**四、作用**

线程的引入使得在一个进程中可以同时执行多个任务，进一步提高了系统的并发性和响应性。例如，在一个网络服务器程序中，可以使用多个线程同时处理多个客户端的连接请求，提高服务器的吞吐量和响应速度。同时，线程也可以用于实现并行计算，将一个大任务分解为多个小任务，分配给不同的线程并行执行，从而缩短任务的执行时间。

### **进程**

**一、定义**

进程是指一个具有一定独立功能的程序关于某个数据集合的一次运行活动。它是操作系统进行资源分配和调度的基本单位。

**二、组成部分**

1. 程序代码：描述了进程要执行的任务。
2. 数据：进程在执行过程中所操作的数据。
3. 进程控制块（PCB）：包含了进程的各种信息，如进程标识、状态、优先级、资源分配情况等，是操作系统管理进程的重要依据。

**三、主要特征**

1. 动态性：进程是程序的一次执行过程，有创建、运行和消亡等状态变化。
2. 并发性：多个进程可以在同一时间间隔内同时运行。
3. 独立性：进程是一个独立运行的基本单位，拥有独立的资源和地址空间。
4. 异步性：各个进程以不可预知的速度向前推进。

**四、状态**

1. 就绪状态：进程已获得除处理器外的所需资源，等待分配处理器资源。
2. 运行状态：进程占用处理器资源正在运行。
3. 阻塞状态：进程因等待某一事件而暂停执行。

**五、作用**

进程使得计算机能够同时执行多个任务，提高了系统的资源利用率和吞吐量。例如，在你同时打开浏览器、文本编辑器和音乐播放器时，操作系统会为每个应用程序创建一个进程，分别管理它们的运行和资源分配。

### 多线程

**一、定义**

多线程允许程序将一个任务分解为多个子任务，每个子任务由一个独立的线程来执行。这些线程可以并发地执行，从而提高程序的并发性和响应性。

**二、主要特点**

1. 提高并发性：多个线程可以同时执行不同的任务，充分利用多核处理器的优势，提高程序的执行效率。
2. 增强响应性：在处理耗时的操作时，可以使用单独的线程来执行，不会阻塞主线程，从而保持程序的响应性。
3. 资源共享：多个线程可以共享进程的内存空间和资源，减少了资源的开销和重复分配。
4. 复杂性增加：多线程编程需要考虑线程之间的同步、互斥和通信等问题，增加了程序的复杂性。

**三、应用场景**

1. 图形用户界面（GUI）应用：在处理用户界面事件和后台任务时，可以使用多线程来保持界面的响应性。
2. 网络服务器：同时处理多个客户端的连接请求，提高服务器的吞吐量和响应速度。
3. 并行计算：将一个大任务分解为多个小任务，分配给不同的线程并行执行，缩短任务的执行时间。
4. 数据处理：同时读取、处理和写入大量数据，提高数据处理的效率。

**四、注意事项**

1. 线程安全：多个线程同时访问共享资源时，需要确保数据的一致性和正确性，避免出现竞争条件和数据冲突。
2. 同步与互斥：使用适当的同步机制，如锁、信号量等，来协调线程之间的访问，防止出现数据不一致的情况。
3. 线程数量控制：过多的线程可能会导致系统资源耗尽和性能下降，需要根据实际情况合理控制线程的数量。
4. 调试困难：多线程程序的调试相对复杂，因为线程的执行顺序是不确定的，可能会出现难以复现的错误。

**什么是多线程？**

有了多线程，我们就可以让程序同时做多件事

**多线程的作用？**
提高效率

**多线程的应用场景？**

只要你想让多个事情同时运行就需要用到多线程

比如：软件中的耗时操作、所有的聊天软件、所有的服务器

# 多线程的两个概念

## 并发

在同一时刻，有多条指令在单个CPU上**交替**执行

## 并行

在同一时刻，有多个指令在多个CPU上**同时**执行
