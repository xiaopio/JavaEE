# 死锁

死锁是一种程序错误状态，当两个或多个线程相互等待对方持有的资源，导致所有等待的线程都无法继续执行时，就会发生死锁。

举例：两个人吃饭只有一双筷子，规定只有同时持有两根筷子才能吃，但此时你拿了一只筷子，另一个人也只拿了一只筷子，你们在等待对方释放另一只筷子，无法继续执行，此时就产生了死锁

## **一、死锁产生的条件**

1. 互斥条件：一个资源每次只能被一个线程使用。
2. 请求与保持条件：一个线程因请求资源而阻塞时，对已获得的资源保持不放。
3. 不剥夺条件：线程已获得的资源，在未使用完之前，不能强行剥夺。
4. 循环等待条件：若干线程之间形成一种头尾相接的循环等待资源关系。

## **二、避免死锁的方法**

1. 破坏互斥条件：一般很难做到，因为有些资源本身就是互斥的。
2. 破坏请求与保持条件：一次性申请所有资源，而不是逐步申请资源。
3. 破坏不剥夺条件：当一个线程获取了部分资源，但无法获取其他资源时，主动释放已获取的资源。
4. 破坏循环等待条件：对资源进行编号，要求线程按照一定的顺序申请资源。